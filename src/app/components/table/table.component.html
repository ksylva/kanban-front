<div><h1 class="p-text-center">{{ tableName }}</h1></div>
<p-toast position="top-center"></p-toast>
<div class="p-grid">
  <div class="p-col-4 p-md-4" style="background-color: beige;">
    <h3 style="border-bottom: gray solid 1px">{{ sections[0].libelle }}</h3>
    <button pButton class="p-d-block p-mx-auto p-button-outlined p-button-success"
            label="Ajouter fiche" (click)="showSaveDialog(sections[0].idSection)"></button>
    <div *ngFor="let card of cardsSect1">
      <div class="card-item">
        <div class="card-list-detail">
          <h5 class="p-mb-2">{{ card.note }}</h5>
          <i class="pi pi-map card-site-icon"></i>
          <span class="card-site">{{ card.lieu }}</span>
          <h6 class="p-mb-2">{{ card.url }}</h6>
          <span class="">
            <button pButton type="button" icon="pi pi-pencil" class="p-button-rounded
            p-button-warning p-button-outlined" (click)="showEditDialog(card.idFiche)"></button>
            <button pButton type="button" icon="pi pi-eye" class="p-button-rounded
            p-button-info p-button-outlined" (click)="showShowDialog(card.idFiche)"></button>
          </span>
        </div>
      </div>
    </div>
  </div>
  <div class="p-col-4 p-md-4" style="background-color: floralwhite;">
    <h3 style="border-bottom: gray solid 1px">{{ sections[1].libelle }}</h3>
    <button pButton class="p-d-block p-mx-auto p-button-outlined p-button-success"
            label="Ajouter fiche" (click)="showSaveDialog(sections[1].idSection)"></button>
    <div *ngFor="let card of cardsSect2">
      <div class="card-item">
        <div class="card-list-detail">
          <h5 class="p-mb-2">{{ card.note }}</h5>
          <i class="pi pi-map card-site-icon"></i>
          <span class="card-site">{{ card.lieu }}</span>
          <h6 class="p-mb-2">{{ card.url }}</h6>
          <span class="">
            <button pButton type="button" icon="pi pi-pencil" class="p-button-rounded
            p-button-warning p-button-outlined" (click)="showEditDialog(card.idFiche)"></button>
            <button pButton type="button" icon="pi pi-eye" class="p-button-rounded
            p-button-info p-button-outlined" (click)="showShowDialog(card.idFiche)"></button>
          </span>
        </div>
      </div>
    </div>
  </div>
  <div class="p-col-4 p-md-4 drag-column" style="background-color: aliceblue;">
    <h3 style="border-bottom: gray solid 1px">{{ sections[2].libelle }}</h3>
    <button pButton class="p-d-block p-mx-auto p-button-outlined p-button-success"
            label="Ajouter fiche" (click)="showSaveDialog(sections[2].idSection)"></button>
    <div *ngFor="let card of cardsSect3">
      <div class="card-item">
        <div class="card-list-detail">
          <h5 class="p-mb-2">{{ card.note }}</h5>
          <i class="pi pi-map card-site-icon"></i>
          <span class="card-site">{{ card.lieu }}</span>
          <h6 class="p-mb-2">{{ card.url }}</h6>
          <span class="">
            <button pButton type="button" icon="pi pi-pencil" class="p-button-rounded
            p-button-warning p-button-outlined" (click)="showEditDialog(card.idFiche)"></button>
            <button pButton type="button" icon="pi pi-eye" class="p-button-rounded
            p-button-info p-button-outlined" (click)="showShowDialog(card.idFiche)"></button>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- card edit/add dialog -->
<p-dialog header="Nouvelle fiche" [(visible)]="displaySave" [style]="{width: '700px', height: '435px'}">
  <ng-template pTemplate="body">
    <form [formGroup]="form" (ngSubmit)="addCard()">
      <div class="p-field p-grid">
        <label for="limit">Date butoire</label>
        <div class="p-col">
          <p-calendar [(ngModel)]="date" [showIcon]="true" id="limit" formControlName="dateButoire"></p-calendar>
        </div>
        <label for="duree">Durée</label>
        <div class="p-col">
          <input type="text" pInputText id="duree" formControlName="duree"
                 required>
        </div>
      </div>
      <div class="p-field p-grid">
        <label for="lieu">Lieu</label>
        <div class="p-col">
          <input type="text" pInputText id="lieu" formControlName="lieu"
                 required>
        </div>
        <label for="url">URL</label>
        <div class="p-col">
          <input type="text" pInputText id="url" formControlName="url"
                 required>
        </div>
      </div>
      <div class="p-field p-grid">
        <label for="note">Note</label>
        <div class="p-col">
          <textarea formControlName="note" id="note" cols="50" rows="10"></textarea>
        </div>
      </div>
      <div class="p-field p-grid">
        <div class="p-col">
          <button pButton type="submit" label="Enregistrer" [disabled]="!form.valid" class="p-d-block p-mx-auto"></button>
        </div>
      </div>
    </form>
  </ng-template>
</p-dialog>
<!-- card edit/save dialog -->

<!-- card edit/add dialog -->
<p-dialog [(visible)]="displayEdit">
  <ng-template pTemplate="header">
    <h4 class="p-text-center">Modification de fiche</h4>
  </ng-template>
  <ng-template pTemplate="body">
    <form>

    </form>
  </ng-template>
</p-dialog>
<!-- card edit/save dialog -->

<!-- card show dialog -->
<p-dialog [(visible)]="displayShow" [style]="{width: '700px', height: '365px'}">
  <ng-template pTemplate="header">
    <h4 class="p-text-center">Détail de la fiche</h4>
  </ng-template>
  <ng-template pTemplate="body">
    <div *ngIf="selectedCard">
      <p><strong>Lieu :</strong> {{ selectedCard.lieu }}</p>
      <p><strong>URL :</strong> {{ selectedCard.url }}</p>
      <p><strong>Durée :</strong> {{ selectedCard.duree }}</p>
      <p><strong>Date limite :</strong> {{ selectedCard.dateButoire | date }}</p>
      <p><strong>Note:</strong> {{ selectedCard.note }}</p>
    </div>
  </ng-template>

</p-dialog>
<!-- card show dialog -->
